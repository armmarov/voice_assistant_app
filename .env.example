# ─── Voice Assistant — environment configuration ──────────────────────────────
#
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# .env is loaded automatically at startup (python-dotenv).
# Regular environment variables always override .env values.
# .env is git-ignored — never commit it.
# ──────────────────────────────────────────────────────────────────────────────


# ─── Wake Word (OpenWakeWord) ─────────────────────────────────────────────────
# Built-in models (no download needed): hey_jarvis, alexa, hey_mycroft, hey_rhasspy
WAKE_WORD_MODEL=hey_jarvis

# Path to custom .onnx wake word model file.
# Leave empty to use the built-in model set by WAKE_WORD_MODEL.
WAKE_WORD_MODEL_PATH=

# Detection threshold (0.0 – 1.0). Higher = less sensitive, fewer false positives.
WAKE_WORD_THRESHOLD=0.5

# Milliseconds to wait for speech after wake word before returning to IDLE.
WAKE_LISTEN_TIMEOUT_MS=10000

# Phrase spoken after wake word is detected. Leave empty for a beep instead.
WAKE_WORD_ACK_PHRASE=Yes sir


# ─── ASR Service ──────────────────────────────────────────────────────────────
ASR_BASE_URL=http://3.114.138.123:8005
# ASR_TIMEOUT=30


# ─── TTS Service ──────────────────────────────────────────────────────────────
TTS_BASE_URL=http://3.114.138.123:8006

# Voice selection: default | liudao | filrty | zhiyu
TTS_VOICE=default
# TTS_TIMEOUT=60


# ─── LLM Service (OpenAI-compatible) ──────────────────────────────────────────
LLM_BASE_URL=http://localhost:11434/v1
LLM_API_KEY=nokey
LLM_MODEL=llama3
# LLM_SYSTEM_PROMPT=You are a helpful voice assistant. Keep answers concise and conversational.
# LLM_TIMEOUT=60


# ─── Audio Devices ────────────────────────────────────────────────────────────
# Run this to list device indices:
#   python3 -c "import pyaudio; pa=pyaudio.PyAudio(); [print(i, pa.get_device_info_by_index(i)['name']) for i in range(pa.get_device_count())]"
# Set to -1 to use the system default.
MIC_DEVICE_INDEX=-1
SPK_DEVICE_INDEX=-1


# ─── Echo Cancellation ────────────────────────────────────────────────────────
# Mute mic in software during TTS playback (prevents self-triggering).
MIC_MUTE_DURING_PLAYBACK=true


# ─── VAD Tuning ───────────────────────────────────────────────────────────────
# VAD_AGGRESSIVENESS=3      # 0 (least) – 3 (most aggressive noise filtering)
# VAD_SILENCE_MS=1200       # Silence duration (ms) that ends an utterance
# VAD_MIN_SPEECH_MS=2000    # Minimum speech length (ms); shorter clips are ignored


# ─── Logging ──────────────────────────────────────────────────────────────────
LOG_FILE=/var/log/voice_assistant.log
LOG_LEVEL=INFO
